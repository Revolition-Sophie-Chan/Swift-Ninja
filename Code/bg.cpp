//=============================================================================
//
// 背景の処理[bg.cpp]
// Author : Tanaka Rikiya
//
//=============================================================================

//=============================================================================
//インクルード
//=============================================================================
#include "renderer.h"
#include "bg.h"
#include "explosion.h"
#include "inputkeyboard.h"
#include "scene2D.h"

//=============================================================================
//マクロ定義
//=============================================================================
#define SIZE_X	(1000.0f)	//Xのサイズ
#define SIZE_Y	(670.0f)	//Yのサイズ

//=============================================================================
//静的メンバ変数の初期化
//=============================================================================
LPDIRECT3DTEXTURE9 CBg::m_pTextureBg = NULL;

//=============================================================================
//コンストラクタ
//=============================================================================
CBg::CBg(OBJECT_TYPE type = OBJECT_TYPE_BG) : CScene2D(type)
{
}

//=============================================================================
//デストラクタ
//=============================================================================
CBg::~CBg()
{
}

//=============================================================================
//生成処理
//=============================================================================
CBg *CBg::Create(D3DXVECTOR3 BGpos)
{
	CBg *pBg;
	pBg = new CBg(OBJECT_TYPE_BG);
	pBg->SetPosition(BGpos);
	pBg->Init();
	pBg->InitTex(1, 1.0f);
	pBg->BindTexture(m_pTextureBg);
	return pBg;
}

//=============================================================================
//初期化処理
//=============================================================================
void CBg::Init()
{
	CScene2D::Init();
}

//=============================================================================
//終了処理
//=============================================================================
void CBg::Uninit(void)
{
	CScene2D::Uninit();
}

//=============================================================================
//更新処理
//=============================================================================
void CBg::Update(void)
{
	CScene2D::Update();
	SetSize(SIZE_X, SIZE_Y);

	//背景が動く
	TextureMove();
}

//=============================================================================
//描画
//=============================================================================
void CBg::Draw(void)
{
	CScene2D::Draw();
}

//=============================================================================
//ロード
//=============================================================================
HRESULT CBg::Load(void)
{
	CRenderer *pRenderer = CManager::GetRenderer();
	LPDIRECT3DDEVICE9 pDevice = pRenderer->GetDevice();
	D3DXCreateTextureFromFile(pDevice, "Data/Texture/BackGround.png", &m_pTextureBg);
	return S_OK;
}

//=============================================================================
//アンロード
//=============================================================================
void CBg::Unload(void)
{
	if (m_pTextureBg != NULL)
	{
		m_pTextureBg->Release();
		m_pTextureBg = NULL;
	}
}

